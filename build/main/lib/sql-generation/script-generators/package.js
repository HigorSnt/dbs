import { commands } from '../language/plsql/index.js';
import { DROP_TEMPLATE, PACKAGE_TEMPLATE, } from '../language/plsql/template/index.js';
import { createScript as createGrantScript, revokeScript as revokeGrantScript, } from './grant.js';
export const createScript = (packageObject) => {
    const { name = '', schemaName = '', is = false, grants = [], declarations = '', replace = false, } = packageObject;
    const packageName = schemaName ? `${schemaName}.${name}` : name;
    const replaceValue = replace ? `${commands.or} ${commands.replace}` : '';
    const isOrAs = is ? commands.is : commands.as;
    const grantScripts = grants.map(createGrantScript);
    const packageScript = PACKAGE_TEMPLATE.replace('<replace>', replaceValue)
        .replaceAll('<object_name>', packageName)
        .replace('<is_or_as>', isOrAs)
        .replace('<declarations>', declarations);
    return `${packageScript}\n\n${grantScripts.join('\n\n')}`;
};
export const dropScript = (packageObject) => {
    const { name = '', schemaName = '', grants = [] } = packageObject;
    const packageName = schemaName ? `${schemaName}.${name}` : name;
    const dropPackage = DROP_TEMPLATE.replace('<database_object>', commands.package).replace('<object_name>', packageName);
    const revokeGrants = grants.map(revokeGrantScript);
    return `${dropPackage}\n\n${revokeGrants.join('\n\n')}`;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFja2FnZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvc3FsLWdlbmVyYXRpb24vc2NyaXB0LWdlbmVyYXRvcnMvcGFja2FnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDdEQsT0FBTyxFQUNMLGFBQWEsRUFDYixnQkFBZ0IsR0FDakIsTUFBTSxxQ0FBcUMsQ0FBQztBQUc3QyxPQUFPLEVBQ0wsWUFBWSxJQUFJLGlCQUFpQixFQUNqQyxZQUFZLElBQUksaUJBQWlCLEdBQ2xDLE1BQU0sWUFBWSxDQUFDO0FBRXBCLE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBRyxDQUFDLGFBQXNCLEVBQVUsRUFBRTtJQUM3RCxNQUFNLEVBQ0osSUFBSSxHQUFHLEVBQUUsRUFDVCxVQUFVLEdBQUcsRUFBRSxFQUNmLEVBQUUsR0FBRyxLQUFLLEVBQ1YsTUFBTSxHQUFHLEVBQUUsRUFDWCxZQUFZLEdBQUcsRUFBRSxFQUNqQixPQUFPLEdBQUcsS0FBSyxHQUNoQixHQUFHLGFBQWEsQ0FBQztJQUVsQixNQUFNLFdBQVcsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxJQUFJLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDaEUsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxFQUFFLElBQUksUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDekUsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDO0lBQzlDLE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUVuRCxNQUFNLGFBQWEsR0FBRyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLFlBQVksQ0FBQztTQUN0RSxVQUFVLENBQUMsZUFBZSxFQUFFLFdBQVcsQ0FBQztTQUN4QyxPQUFPLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQztTQUM3QixPQUFPLENBQUMsZ0JBQWdCLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFFM0MsT0FBTyxHQUFHLGFBQWEsT0FBTyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDNUQsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLENBQUMsYUFBc0IsRUFBVSxFQUFFO0lBQzNELE1BQU0sRUFBRSxJQUFJLEdBQUcsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFLEVBQUUsTUFBTSxHQUFHLEVBQUUsRUFBRSxHQUFHLGFBQWEsQ0FBQztJQUNsRSxNQUFNLFdBQVcsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxJQUFJLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFFaEUsTUFBTSxXQUFXLEdBQUcsYUFBYSxDQUFDLE9BQU8sQ0FDdkMsbUJBQW1CLEVBQ25CLFFBQVEsQ0FBQyxPQUFPLENBQ2pCLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUV4QyxNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFFbkQsT0FBTyxHQUFHLFdBQVcsT0FBTyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7QUFDMUQsQ0FBQyxDQUFDIn0=